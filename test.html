<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Battery Level to Telegram</title>
</head>
<body>
<p id="battery">در حال دریافت میزان شارژ باتری...</p>
<button onclick="sendToTelegram()">ارسال به تلگرام</button>

<script>
navigator.getBattery().then(function(battery) {
    function updateBatteryStatus() {
        document.getElementById('battery').textContent = `میزان شارژ باتری: ${Math.round(battery.level * 100)}%`;
    }
    updateBatteryStatus();
    battery.addEventListener('chargingchange', updateBatteryStatus);
    battery.addEventListener('levelchange', updateBatteryStatus);
});

function sendToTelegram() {
    navigator.getBattery().then(function(battery) {
        var batteryLevel = Math.round(battery.level * 100);
        var telegramToken = '7570828689:AAHWrO48Y9WbjjjG1q5oeKAHZJB44bU2jWE';
        var chatId = '216273191';
        var message = `میزان شارژ باتری: ${batteryLevel}%`;
        var url = `https://api.telegram.org/bot${telegramToken}/sendMessage?chat_id=${chatId}&text=${encodeURI(message)}`;

        fetch(url)
        .then(response => response.json())
        .then(data => {
            if (data.ok) {
                alert('پیام با موفقیت ارسال شد.');
            } else {
                alert('خطا در ارسال پیام.');
            }
        })
        .catch(error => alert('خطا در ارسال پیام: ' + error));
    });
}
</script>
</body>
</html>